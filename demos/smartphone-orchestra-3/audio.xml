<?xml version="1.0" encoding="UTF-8"?>
<Audio 

	version="1.0" 
	timeUnit="ms" 
	gain="0dB"
	controls="false">

	<var name="filter" default="0" />
	<var name="f1" default="60" value="$key" mapin="0,128" mapout="0,128" convert="MIDI->frequency" />
	<var name="d1" value="$expression" default="0.5" mapin="0,1" mapout="-50, 50" />
	<var name="d2" value="$filter" default="0.5" mapin="0,1" mapout="0, 2400" />
	<var name="solo" default="0" />
	<var name="pad" default="1" />
	<var name="padGate" default="1" />
	<var name="soloGate" default="0" />

	<var name="padVolume" mapin="0,127" mapout="-30,0" convert="dB->power"/>

	<var name="f2" default="60" value="$testNote" mapin="0,128" mapout="0,128" convert="MIDI->frequency" />
	<var name="testGate" default="0" />


	<var name="dist" default="0" mapin="1,2" mapout="0,1" value="dist([0, $y], [0,-1])"/>
	<var name="speed" mapin="0.002,0.3" mapout="0,1" default="0" value="$dist.speed" curve="1" />
	

	<Mixer class="LFO" gain="10" output="none">
		<OscillatorNode frequency="0.75"/>
	</Mixer>

	<Mixer>
		<Chain gain="$pad">
			<OscillatorNode type="sawtooth" frequency="$f1" detune="$d1" transitionTime="1" />
			<!-- <BiquadFilterNode type="lowpass" frequency="$f1*4" transitionTime="200" /> -->
			<BiquadFilterNode type="lowpass" frequency="$f1+$f1*$speed*5" transitionTime="20" />
			<GainNode gain="$padGate*$dragged" transitionTime="20"/>
			<GainNode gain="$speed" transitionTime="20" />
			<GainNode gain="$padVolume" />
			<GainNode gain="+20dB" />
		</Chain>

		<Chain gain="$solo">
			<OscillatorNode type="square" frequency="$f1*2" detune=".LFO" transitionTime="10"/>
			<BiquadFilterNode type="lowpass" frequency="$f1*4" />
			<BiquadFilterNode type="lowpass" frequency="$f1*4" />
			<GainNode gain="$soloGate" transitionTime="100"/>
			<GainNode gain="+10dB"/>
		</Chain>

		<Chain>
			<OscillatorNode type="square" frequency="$f2"/>
			<GainNode gain="$testGate"/>
		</Chain>
	</Mixer>

</Audio>
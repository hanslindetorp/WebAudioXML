<?xml version="1.0" encoding="UTF-8"?>
<Audio transitionTime="1" version="1.0" controls="true" timeUnit="ms" gain="+6dB" xmlns:xi="http://www.w3.org/2001/XInclude">
    
    
    
    <Mixer output=".white-noise">
        <AudioWorkletNode src="white-noise-processor.js"></AudioWorkletNode>
    </Mixer> 


     
    
    <Mixer gain="1" output="#ch1-hang-flyer">
        <var name="zPos" value="$time" mapin="0,31" mapout="AnimationData/hangFlyer/hangFlyer_Zloc.csv"></var>
        <var name="angle" value="$time" mapin="0,31" mapout="AnimationData/hangFlyer/hangFlyer_rAngle.csv"></var>
        
        <var name="pan" value="$angle" mapin="-0.066,0.423" mapout="-1,4"></var>
        <var name="speed" value="$zPos" mapin="1.036,1.758" mapout="0,1"></var>

        <var name="x" value="$x1" default="0.5"></var>
        <var name="y" value="$y1" default="0.5"></var>
        <var name="onX" value="$y" mapin="0,0.5,1" mapout="0,1,0"></var>
        <var name="onY" value="$x" mapin="0,0.5,1" mapout="0,1,0"></var>
        
        <var name="engine_gain" value="0dB"></var>
        <xi:include href="vehicle-1-hang-flyer.xml" />
    </Mixer>

    <Mixer gain="1" output="#ch2-wheel-chair">
        <var name="xPos" value="$time" mapin="0,31" mapout="AnimationData/gyroChair/gyroChair_rXloc.csv"></var>
        <var name="wheelRotL" value="$time" mapin="0,31" mapout="AnimationData/gyroChair/gyroChair_WheelRot_Left.csv"></var>
        
        
        <var name="pan" value="$xPos" mapin="-3,7" mapout="-5,5"></var>
        <var name="speed" value="$wheelRotL.speed" mapin="0,1" mapout="0,1"></var>
    
        <var name="x" value="$x2" default="0.5"></var>
        <var name="y" value="$y2" default="0.5"></var>
        <var name="onX" value="$y" mapin="0,0.5,1" mapout="0,1,0"></var>
        <var name="onY" value="$x" mapin="0,0.5,1" mapout="0,1,0"></var>

        <xi:include href="vehicle-2-wheel-chair.xml" />
    </Mixer>

    <Mixer gain="1" output="#ch3-fleeting-board">
        <var name="dist" value="$time" mapin="0,31" mapout="AnimationData/hoverBoard/hoverBoard_Dist.csv"></var>
        <var name="locZ" value="$dist" mapin="10, 17" mapout="-10,-30"></var>
        <var name="yRot" value="$time" mapin="0,31" mapout="AnimationData/hoverBoard/hoverBoard_rYRot.csv"></var>

        <var name="angle" value="$time" mapin="0,31" mapout="AnimationData/hoverBoard/hoverBoard_Angle.csv"></var>
        <var name="pan" value="$angle" mapin="-0.35,0.5" mapout="-7,7"></var>
        <var name="speed" value="$yRot" mapin="-0.825,0.816" mapout="1,0,1"></var>
        
        <var name="HP" value="$dist" mapin="10,17" mapout="300, 600"></var>
        
        <var name="x" value="$x3" default="0.5"></var>
        <var name="y" value="$y3" default="0.5"></var>
        <var name="onX" value="$y" mapin="0,0.5,1" mapout="0,1,0"></var>
        <var name="onY" value="$x" mapin="0,0.5,1" mapout="0,1,0"></var>

        <xi:include href="vehicle-3-fleeting-board.xml" />
    </Mixer>



    <var name="ch1" value="$solo" mapin="0,1,2,3" mapout="0,3,-12,-12" default="0" convert="dB->power"></var>
    <var name="ch2" value="$solo" mapin="0,1,2,3" mapout="0,-12,3,-12" default="0" convert="dB->power"></var>
    <var name="ch3" value="$solo" mapin="0,1,2,3" mapout="0,-12,-12,3" default="0" convert="dB->power"></var>
    <var name="bg" value="$solo" mapin="0,1,2,3" mapout="0,-3,-3,-3" default="0" convert="dB->power"></var>
    <var name="ambiencegain" default="0.5"></var> 

    

    <Mixer gain="$master-$calibration" transitionTime="200">
        <Chain>
            <!-- <var name="multi_pan" mapin="-1,1"></var> -->
            
            <GainNode id="ch1-hang-flyer" gain="$ch1"></GainNode>
            <Send output=".cityConvolution" gain="-0"></Send>
            <!-- <GainNode output=".multi-out"></GainNode>
            <ChannelMergerNode pan="$hang-flyer-pan">
                <GainNode class="multi-out"></GainNode>
                <GainNode class="multi-out"></GainNode>
                <GainNode class="multi-out"></GainNode>
                <GainNode class="multi-out"></GainNode>
            </ChannelMergerNode> -->
        </Chain>
        <Chain>
            <GainNode id="ch2-wheel-chair" gain="$ch2"></GainNode>
            <Send output=".cityConvolution" gain="-12dB"></Send>
        </Chain>
        <Chain>
            <GainNode id="ch3-fleeting-board" gain="$ch3"></GainNode>
            <Send output=".cityConvolution" gain="-12dB"></Send>
        </Chain>
        
        <ConvolverNode class="cityConvolution" src="convolution/PlateSmall.wav"></ConvolverNode>
        
        <Mixer gain="$ambiencegain">
            <Mixer gain="$bg">
                <AmbientAudio src="ambience/front_atmo_w_voices.wav" start="auto" gain="-12dB"></AmbientAudio>
                <AmbientAudio src="ambience/street_car_distant.wav" start="auto" gain="-12dB"></AmbientAudio>
                <AmbientAudio src="ambience/surround_atmo.wav" start="auto" gain="-12dB"></AmbientAudio>  
                <!-- <AmbientAudio src="ambience/ped_crossing.wav" start="auto" gain="-12dB"></AmbientAudio>   -->
                <AmbientAudio src="ambience/steg_loop.wav" start="auto" gain="-12dB"></AmbientAudio>    
            </Mixer>
        </Mixer>
        
    </Mixer>

    <Mixer gain="$calibration">
        <Chain gain="-9dB">
            <GainNode class="white-noise"></GainNode>
            <!-- <ChannelMergerNode>
                <GainNode class="white-noise"></GainNode>
                <GainNode class="white-noise"></GainNode>
                <GainNode class="white-noise"></GainNode>
                <GainNode class="white-noise"></GainNode>
                <GainNode class="white-noise"></GainNode>
                <GainNode class="white-noise"></GainNode>
                <GainNode class="white-noise"></GainNode>
                <GainNode class="white-noise"></GainNode>
            </ChannelMergerNode> -->
        </Chain>
    </Mixer>
    

    <var name="master" default="1"></var>
    <var name="calibration" default="0"></var>
</Audio>
